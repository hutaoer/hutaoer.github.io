(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{292:function(t,a,e){"use strict";e.r(a);var i=e(14),s=Object(i.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"微信小程序-webview-常见问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#微信小程序-webview-常见问题"}},[t._v("#")]),t._v(" 微信小程序 & webview 常见问题")]),t._v(" "),a("h2",{attrs:{id:"兼容性问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#兼容性问题"}},[t._v("#")]),t._v(" 兼容性问题")]),t._v(" "),a("h3",{attrs:{id:"keyframe-动画"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#keyframe-动画"}},[t._v("#")]),t._v(" keyframe 动画")]),t._v(" "),a("ul",[a("li",[t._v("小程序里面，非永久性的帧动画执行一次后，通过 state 变动导致 view 更新后，动画不会触发。H5 会正常执行动画。")]),t._v(" "),a("li",[t._v("解决：添加 infinite 属性。或者使用其他实现方式。")]),t._v(" "),a("li")]),t._v(" "),a("h2",{attrs:{id:"ui-稿"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ui-稿"}},[t._v("#")]),t._v(" UI 稿")]),t._v(" "),a("ul",[a("li",[t._v("App 内嵌页面、小程序页面、H5 页面尽可能出三种样式，因为头部的样式会不一样。")])]),t._v(" "),a("h2",{attrs:{id:"知识点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#知识点"}},[t._v("#")]),t._v(" 知识点")]),t._v(" "),a("h3",{attrs:{id:"openid-与-unionid"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#openid-与-unionid"}},[t._v("#")]),t._v(" openID 与 unionID:")]),t._v(" "),a("ul",[a("li",[t._v("OpenID 就是用户在某一公众平台下的标识。OpenID = 用户微信号 & 公众平台 APPID（两个数据加密得到的字符串）\nUnionID 机制的作用说明：如果开发者拥有多个移动应用、网站应用和公众帐号，可通过获取用户基本信息中的 unionid 来区分用户的唯一性，因为同一用户，对同一个微信开放平台下的不同应用（移动应用、网站应用和公众帐号），unionid 是相同的。UnionID = 用户微信号 & 开放平台 APPID（两个数据加密得到的字符串）")])]),t._v(" "),a("h2",{attrs:{id:"h5-webview"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#h5-webview"}},[t._v("#")]),t._v(" h5 webview")]),t._v(" "),a("h3",{attrs:{id:"h5-不同环境授权登录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#h5-不同环境授权登录"}},[t._v("#")]),t._v(" H5 不同环境授权登录")]),t._v(" "),a("ul",[a("li",[t._v("目前一共有 dev, fat, pro 三套环境，但是公众号的授权登录，只支持两个域名，所以目前仅支持 fat、pro 的授权登录")])]),t._v(" "),a("h3",{attrs:{id:"h5-调用微信支付"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#h5-调用微信支付"}},[t._v("#")]),t._v(" H5 调用微信支付")]),t._v(" "),a("ul",[a("li",[t._v("需要支持 https")]),t._v(" "),a("li",[t._v("需要在不同的域名下，添加一个校验文件，比如"),a("code",[t._v("h5.domain.com/xxx.txt")])])]),t._v(" "),a("h3",{attrs:{id:"微信-h5-分享提示签名失败"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#微信-h5-分享提示签名失败"}},[t._v("#")]),t._v(" 微信 H5 分享提示签名失败")]),t._v(" "),a("ul",[a("li",[t._v("如果后端计算签名没有问题，那就是传参的 url 的取值问题。参考：https://github.com/yongheng2016/blog/issues/78")]),t._v(" "),a("li",[t._v("必须是当前页面的 url，去掉 hash 值以后，再传给后端进行计算相应的签名。")])]),t._v(" "),a("h2",{attrs:{id:"小程序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#小程序"}},[t._v("#")]),t._v(" 小程序")]),t._v(" "),a("h3",{attrs:{id:"登录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#登录"}},[t._v("#")]),t._v(" 登录")]),t._v(" "),a("ul",[a("li",[t._v("授权登录的时候，如果要保持 app, h5, 小程序三端账号统一，只能使用 unionID，需要后端解析，拿到 unionID")]),t._v(" "),a("li",[t._v("unionID 机制说明：https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/union-id.html")]),t._v(" "),a("li",[t._v("获取不到 unionID: https://developers.weixin.qq.com/community/develop/doc/00002499ae8a3835071a282cb52000")]),t._v(" "),a("li",[t._v("通过解密方式获取 unionID: \nhttps://blog.csdn.net/chiyan5284/article/details/100650055?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-5.nonecase&depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-5.nonecase")])]),t._v(" "),a("h3",{attrs:{id:"打包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#打包"}},[t._v("#")]),t._v(" 打包")]),t._v(" "),a("ul",[a("li",[t._v("小程序环境，navigator 对应的属性跟浏览器环境不一样，引入的第三方加密包，有兼容问题")]),t._v(" "),a("li",[t._v("打包的时候，由于小程序环境不会用到该页面，不打包进去。")]),t._v(" "),a("li",[t._v("对包做修改，对部分对象兼容小程序。修改方法：\nhttps://developers.weixin.qq.com/community/develop/doc/000068b497cfc00619b7bcfdc51004\nhttps://juejin.im/post/5de086ade51d4532fc2d6407")]),t._v(" "),a("li",[t._v("网友开源的版本：https://github.com/zhangs3721/wx_jsencrypt")])])])}),[],!1,null,null,null);a.default=s.exports}}]);