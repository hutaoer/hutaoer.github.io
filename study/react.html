<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>React 学习笔记 | 逗逼码农:Blackey</title>
    <meta name="generator" content="VuePress 1.9.9">
    <script>
      var _hmt = _hmt || [];
      (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?b6eca7f42777b93d2edc92dba0220839";
        var s = document.getElementsByTagName("script")[0]; 
        s.parentNode.insertBefore(hm, s);
      })();
    </script>
    <meta name="description" content="持续提升，降低欲望；乐观幽默，自律坦然">
    
    <link rel="preload" href="/assets/css/0.styles.77881e6a.css" as="style"><link rel="preload" href="/assets/js/app.53434269.js" as="script"><link rel="preload" href="/assets/js/3.c8dd2d9d.js" as="script"><link rel="preload" href="/assets/js/1.7861730c.js" as="script"><link rel="preload" href="/assets/js/86.822bd8b6.js" as="script"><link rel="prefetch" href="/assets/js/10.3893cb90.js"><link rel="prefetch" href="/assets/js/100.cdab3fc0.js"><link rel="prefetch" href="/assets/js/101.e1d15c23.js"><link rel="prefetch" href="/assets/js/102.4f1f1b34.js"><link rel="prefetch" href="/assets/js/103.cfc9b460.js"><link rel="prefetch" href="/assets/js/104.f68f64a5.js"><link rel="prefetch" href="/assets/js/105.96af16dc.js"><link rel="prefetch" href="/assets/js/106.8fc0d360.js"><link rel="prefetch" href="/assets/js/107.c7c62972.js"><link rel="prefetch" href="/assets/js/108.abdbaf5a.js"><link rel="prefetch" href="/assets/js/109.00754b67.js"><link rel="prefetch" href="/assets/js/11.61832a83.js"><link rel="prefetch" href="/assets/js/110.e470b215.js"><link rel="prefetch" href="/assets/js/111.fb0658ff.js"><link rel="prefetch" href="/assets/js/112.5bcea3be.js"><link rel="prefetch" href="/assets/js/113.23abd8cc.js"><link rel="prefetch" href="/assets/js/114.d28c3dc6.js"><link rel="prefetch" href="/assets/js/115.f268b523.js"><link rel="prefetch" href="/assets/js/116.50da8f72.js"><link rel="prefetch" href="/assets/js/117.ec161660.js"><link rel="prefetch" href="/assets/js/118.9e6184fe.js"><link rel="prefetch" href="/assets/js/12.43eda7d3.js"><link rel="prefetch" href="/assets/js/13.0afadb06.js"><link rel="prefetch" href="/assets/js/14.d067a48a.js"><link rel="prefetch" href="/assets/js/15.90ea9d15.js"><link rel="prefetch" href="/assets/js/16.c4813a0b.js"><link rel="prefetch" href="/assets/js/17.175d385b.js"><link rel="prefetch" href="/assets/js/18.b1490be7.js"><link rel="prefetch" href="/assets/js/19.618712bb.js"><link rel="prefetch" href="/assets/js/20.b7ef3917.js"><link rel="prefetch" href="/assets/js/21.0ecf12b3.js"><link rel="prefetch" href="/assets/js/22.4d6b3771.js"><link rel="prefetch" href="/assets/js/23.41a275c2.js"><link rel="prefetch" href="/assets/js/24.e0d30f57.js"><link rel="prefetch" href="/assets/js/25.ee2ba3ba.js"><link rel="prefetch" href="/assets/js/26.1de9cec8.js"><link rel="prefetch" href="/assets/js/27.8619519d.js"><link rel="prefetch" href="/assets/js/28.411c7506.js"><link rel="prefetch" href="/assets/js/29.83f6eda1.js"><link rel="prefetch" href="/assets/js/30.85737230.js"><link rel="prefetch" href="/assets/js/31.e3b786b8.js"><link rel="prefetch" href="/assets/js/32.f8a3a73e.js"><link rel="prefetch" href="/assets/js/33.baa5f27d.js"><link rel="prefetch" href="/assets/js/34.6de2633b.js"><link rel="prefetch" href="/assets/js/35.803881f7.js"><link rel="prefetch" href="/assets/js/36.0958ab11.js"><link rel="prefetch" href="/assets/js/37.9d88c651.js"><link rel="prefetch" href="/assets/js/38.7d6a1dfa.js"><link rel="prefetch" href="/assets/js/39.2059ba28.js"><link rel="prefetch" href="/assets/js/4.8ad7bd64.js"><link rel="prefetch" href="/assets/js/40.4c4050aa.js"><link rel="prefetch" href="/assets/js/41.cc9fe241.js"><link rel="prefetch" href="/assets/js/42.dc2833d1.js"><link rel="prefetch" href="/assets/js/43.a80e23a4.js"><link rel="prefetch" href="/assets/js/44.cc25e314.js"><link rel="prefetch" href="/assets/js/45.f8df9496.js"><link rel="prefetch" href="/assets/js/46.e81341ef.js"><link rel="prefetch" href="/assets/js/47.04b3db00.js"><link rel="prefetch" href="/assets/js/48.22bb2571.js"><link rel="prefetch" href="/assets/js/49.8bcda050.js"><link rel="prefetch" href="/assets/js/5.ef62d1a1.js"><link rel="prefetch" href="/assets/js/50.86449f68.js"><link rel="prefetch" href="/assets/js/51.d1365e65.js"><link rel="prefetch" href="/assets/js/52.1c0fc16c.js"><link rel="prefetch" href="/assets/js/53.86090818.js"><link rel="prefetch" href="/assets/js/54.2cf30439.js"><link rel="prefetch" href="/assets/js/55.329afde5.js"><link rel="prefetch" href="/assets/js/56.255a51c8.js"><link rel="prefetch" href="/assets/js/57.d9a12540.js"><link rel="prefetch" href="/assets/js/58.43dd25a9.js"><link rel="prefetch" href="/assets/js/59.2684d051.js"><link rel="prefetch" href="/assets/js/6.6ba9f8cf.js"><link rel="prefetch" href="/assets/js/60.075715f2.js"><link rel="prefetch" href="/assets/js/61.dd54aeb6.js"><link rel="prefetch" href="/assets/js/62.cf9a44ed.js"><link rel="prefetch" href="/assets/js/63.622c514d.js"><link rel="prefetch" href="/assets/js/64.090bfa3a.js"><link rel="prefetch" href="/assets/js/65.836bbaa7.js"><link rel="prefetch" href="/assets/js/66.ca8e6ad4.js"><link rel="prefetch" href="/assets/js/67.78af426b.js"><link rel="prefetch" href="/assets/js/68.c281a79c.js"><link rel="prefetch" href="/assets/js/69.0ea3b494.js"><link rel="prefetch" href="/assets/js/7.3fda5249.js"><link rel="prefetch" href="/assets/js/70.31fc8fcc.js"><link rel="prefetch" href="/assets/js/71.8c316fd6.js"><link rel="prefetch" href="/assets/js/72.a561e32a.js"><link rel="prefetch" href="/assets/js/73.95205378.js"><link rel="prefetch" href="/assets/js/74.b97b8edd.js"><link rel="prefetch" href="/assets/js/75.8984551c.js"><link rel="prefetch" href="/assets/js/76.48144d91.js"><link rel="prefetch" href="/assets/js/77.432007aa.js"><link rel="prefetch" href="/assets/js/78.e0b48e64.js"><link rel="prefetch" href="/assets/js/79.52c4527f.js"><link rel="prefetch" href="/assets/js/8.a3b590bc.js"><link rel="prefetch" href="/assets/js/80.b02562fc.js"><link rel="prefetch" href="/assets/js/81.3851d900.js"><link rel="prefetch" href="/assets/js/82.282d4796.js"><link rel="prefetch" href="/assets/js/83.c8355660.js"><link rel="prefetch" href="/assets/js/84.51c3a79a.js"><link rel="prefetch" href="/assets/js/85.c49fd04b.js"><link rel="prefetch" href="/assets/js/87.ff514408.js"><link rel="prefetch" href="/assets/js/88.72a5216c.js"><link rel="prefetch" href="/assets/js/89.340ecc8c.js"><link rel="prefetch" href="/assets/js/9.5debc505.js"><link rel="prefetch" href="/assets/js/90.329993ef.js"><link rel="prefetch" href="/assets/js/91.d4a35c23.js"><link rel="prefetch" href="/assets/js/92.7cd06786.js"><link rel="prefetch" href="/assets/js/93.fcdae0c1.js"><link rel="prefetch" href="/assets/js/94.59f35b2e.js"><link rel="prefetch" href="/assets/js/95.137bd6ab.js"><link rel="prefetch" href="/assets/js/96.c243d3ef.js"><link rel="prefetch" href="/assets/js/97.71d94752.js"><link rel="prefetch" href="/assets/js/98.181bf2fb.js"><link rel="prefetch" href="/assets/js/99.04033ed1.js">
    <link rel="stylesheet" href="/assets/css/0.styles.77881e6a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>逗逼码农:Blackey</h3> <p class="description" data-v-59e6cb88>持续提升，降低欲望；乐观幽默，自律坦然</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
          
        <!---->
        2023
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">逗逼码农:Blackey</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><a href="https://github.com/hutaoer" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://www.cnblogs.com/hutaoer/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  旧的博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><!----> <!----> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>108</h3> <h6 data-v-1fad0c41>Articles</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>60</h3> <h6 data-v-1fad0c41>Tags</h6></div></div> <ul class="social-links" data-v-1fad0c41><li class="social-item" data-v-1fad0c41><i class="iconfont reco-github" style="color:#67cc86;" data-v-1fad0c41></i></li></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><a href="https://github.com/hutaoer" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://www.cnblogs.com/hutaoer/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  旧的博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88></h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
          
        <!---->
        2023
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">React 学习笔记</h1> <div data-v-8a445198><!----> <!----> <!----> <i class="tags iconfont reco-tag" data-v-8a445198><span class="tag-item" data-v-8a445198>React</span></i></div></div> <div class="theme-reco-content content__default"><h1 id="react-学习笔记"><a href="#react-学习笔记" class="header-anchor">#</a> React 学习笔记</h1> <ul><li><code>React</code>是一个用于构建用户界面的 JS 库，相当于 <code>MVC</code> 中的<code>View</code>层。</li></ul> <h2 id="设计思想"><a href="#设计思想" class="header-anchor">#</a> 设计思想</h2> <ul><li>React 通过一种比传统的双向绑定略微繁琐的方法来实现反向数据传递。尽管如此，但这种需要显式声明的方法更有助于人们理解程序的运作方式。</li> <li>state 只能由拥有它们的组件进行更改。</li></ul> <h2 id="版本更新"><a href="#版本更新" class="header-anchor">#</a> 版本更新</h2> <ul><li>React 16</li> <li>React 17，没有添加任何面向开发人员的新功能，简化React自身的一次升级。
<ul><li>去除事件池。</li> <li>事件代理更改。在React 16和更早的版本中，React将对大多数事件执行<code>document.addEventListener()</code>。 React 17将在后调用<code>rootNode.addEventListener()</code>。</li> <li>新的<code>jsx</code>转换。为全新的 JSX 转换器添加 <code>react/jsx-runtime</code> 和 <code>react/jsx-dev-runtime</code>。</li> <li><code>Concurrent Mode</code> (实验阶段)。在实现性 API 前添加 <code>unstable_</code> 前缀。</li> <li><code>useEffect</code> 的回调修改为异步调用。<code>useEffect</code> 的副作用清理函数是在 <code>effect</code> 执行之后立马执行的，但是在使用中发现了如果回调中的操作比较耗时，会造成一些性能问题，现在<code>useEffect</code> 的 副作用清理函数会在 <code>render</code> 后执行了。</li></ul></li> <li>React 18 Alpha
<ul><li>时间分片是利用了 fiber 的可中断，可继续的功能，每个渲染周期内都会留一部分的时间来响应用户的输入,或者其他 IO 的状态修改。</li> <li>使用 Transition API 进行并发控制。React 在内部使用了一个“调度程序”，负责对这些回调进行优先级排序和请求</li> <li>自动批处理，多次调用状态修改函数，会进行合并。如果不想批处理，需要在函数外面包裹一层<code>flushSync</code>函数，同步渲染。</li> <li>SSR 支持 Suspense，更快的加载页面。</li></ul></li></ul> <h2 id="基础"><a href="#基础" class="header-anchor">#</a> 基础</h2> <h3 id="对比-vue"><a href="#对比-vue" class="header-anchor">#</a> 对比 Vue</h3> <ul><li><code>JSX</code> 是一种扩展的 <code>XML</code> 语言，最终 <code>JSX</code> 写出的代码会被转换成 <code>React.createElement</code>的形式。</li> <li><code>JSX</code> 中的表达式，是使用<code>{}</code>来插入；而 Vue 使用的是“Mustache”语法 (双大括号) 的文本插值。</li> <li>跟 Vue 比较，更接近于原生 JS，比如少了指令、修饰符等一些语法糖。</li> <li><code>portal</code> 跟 Vue 中的 <code>teloport</code> 类似。</li> <li><code>props.children</code> 跟 <code>slot</code>类似。</li> <li><code>Context</code> 类似 <code>provider/inject</code></li></ul> <h4 id="指定属性"><a href="#指定属性" class="header-anchor">#</a> 指定属性</h4> <ul><li>通过引号来指定字符串字面量， <code>const element = &lt;div dataIndex=&quot;o&quot;&gt;&lt;/div&gt;</code></li> <li>通过大括号，来指定表达式，<code>const el = &lt;img src={url}&gt;&lt;/img&gt;</code></li> <li><code>React DOM</code> 使用 <code>camelCase</code>（小驼峰命名）来定义属性的名称。</li> <li><code>React DOM</code> 在渲染所有输入内容之前，默认会进行转义。它可以确保在你的应用中，永远不会注入那些并非自己明确编写的内容。可以有效的防止XSS攻击。</li></ul> <h3 id="生命周期"><a href="#生命周期" class="header-anchor">#</a> 生命周期</h3> <ul><li>挂载过程中会依次执行：
<ul><li>constructor</li> <li>componentWillMount</li> <li>render</li> <li>componentDidMount,一般组件需要自己加载数据，放到这个函数中</li></ul></li></ul> <h4 id="更新"><a href="#更新" class="header-anchor">#</a> 更新</h4> <ul><li>有三种途径：父组件更新、自身的状态变化、强制更新</li></ul> <h3 id="数据-state"><a href="#数据-state" class="header-anchor">#</a> 数据 State</h3> <ul><li>构造函数是唯一可以给 <code>this.state</code> 赋值的地方。</li> <li>出于性能考虑，<code>React</code> 可能会把多个 <code>setState()</code> 调用合并成一个调用。</li> <li>数据是向下流动的，也称之为单向数据流。</li></ul> <h3 id="组件"><a href="#组件" class="header-anchor">#</a> 组件</h3> <ul><li>所有 React 组件的 <code>props</code> 不能更改。</li></ul> <h4 id="functional-component"><a href="#functional-component" class="header-anchor">#</a> Functional Component</h4> <ul><li>函数式组件</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Welcome</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="类组件"><a href="#类组件" class="header-anchor">#</a> 类组件</h4> <ul><li>即：class 组件。</li> <li><code>Class</code> 组件应该始终使用 <code>props</code> 参数来调用父类的构造函数。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Welcome</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="purecomponent"><a href="#purecomponent" class="header-anchor">#</a> PureComponent</h4> <ul><li>15.3 引入的一个组件基类。</li> <li><code>shouldComponentUpdate</code>不会直接返回<code>true</code>，而是会对属性和状态进行浅层比较。</li></ul> <h4 id="渲染"><a href="#渲染" class="header-anchor">#</a> 渲染</h4> <ul><li>条件渲染：
<ul><li><code>condition &amp;&amp; expression</code></li> <li><code>condition ? expression1 : expression2</code></li></ul></li> <li>在组件的 render 方法中返回 null 并不会影响组件的生命周期。</li></ul> <h4 id="列表"><a href="#列表" class="header-anchor">#</a> 列表</h4> <ul><li>如果列表项目的顺序可能会变化，我们不建议使用索引来用作 <code>key</code> 值，因为这样做会导致性能变差，还可能引起组件状态的问题。</li> <li>当我们生成两个不同的数组时，我们可以使用相同的 <code>key</code> 值。</li></ul> <h4 id="事件"><a href="#事件" class="header-anchor">#</a> 事件</h4> <ul><li>不能通过返回 <code>false</code> 的方式阻止默认行为。你必须显式的使用 <code>preventDefault</code>。</li> <li>class 的方法默认不会绑定 this，需要手动绑定。有两种方法可以解决：
<ul><li>试验性质的<code>public class fields</code>语法，声明方法的时候：<code>handleClick = () =&gt; {console.log()}</code>, 事件监听：<code>&lt;button onClick={this.handleClick}&gt;&lt;/button&gt;</code></li> <li>或者可以使用箭头函数，<code>handleClick() {}</code>，事件监听：<code>&lt;button onClick={() =&gt; {this.handleClick()}&gt;&lt;/button</code>。这种写法有个问题，每次渲染的时候都会创建回调函数。如果是作为props传入子组件的话，会进行额外的重新渲染。</li></ul></li> <li>事件传参，有两种方式
<ul><li><code>&lt;button onClick={(e) =&gt; this.deleteRow(id, e)}&gt;Delete Row&lt;/button&gt;</code>，这种需要显示的传递事件对象 e。</li> <li><code>&lt;button onClick={this.deleteRow.bind(this, id)}&gt;Delete Row&lt;/button&gt;</code>，默认隐式传递。</li></ul></li></ul> <h3 id="合成事件"><a href="#合成事件" class="header-anchor">#</a> 合成事件</h3> <ul><li>React 合成事件（<code>SyntheticEvent</code>）是React模拟原生DOM事件所有能力的一个事件对象。它遵循 W3C 规范，兼容所有浏览器，拥有与浏览器原生事件相同的接口。</li> <li>React 中，所有事件都是合成的，不是原生的，但可以通过 <code>e.nativeEvent</code> 属性获取 DOM 事件。</li> <li>为什么使用合成事件
<ul><li>浏览器兼容，使用顶级事件代理机制，保证冒泡的一致性。</li> <li>避免垃圾回收。引入事件池，从中获取或释放事件对象，避免频繁的创建和销毁事件对象。</li> <li>方便事件统一管理和事务机制。</li></ul></li> <li>可以使用 <code>e.stopPropagation()</code> 或者 <code>e.cancelBubble=true（IE）</code>来阻止事件的冒泡传播。</li> <li>与原生事件区别
<ul><li>命名方式不同。原生为纯小写<code>&lt;button onclick='handleClick()'&gt;</code>，React采用小驼峰，<code>&lt;button onClick={handleClick}&gt;</code></li> <li>事件处理函数写法不同，原生是字符串，React是函数。</li> <li>阻止默认行为方式不同：原生返回<code>false</code>，React 显示调用<code>preventDefault()</code></li></ul></li> <li>执行顺序
<ul><li>在 React 中，“合成事件”会以事件委托<code>（Event Delegation）</code>方式绑定在组件最上层，并在组件卸载<code>（unmount）</code>阶段自动销毁绑定的事件。</li> <li>React 所有事件都挂载在 document 对象上；</li> <li>当真实 DOM 元素触发事件，会冒泡到 document 对象后，再处理 React 事件；</li> <li>所以会先执行原生事件，然后处理 React 事件；</li> <li>最后真正执行 document 上挂载的事件。</li></ul></li></ul> <h3 id="表单"><a href="#表单" class="header-anchor">#</a> 表单</h3> <ul><li>表单一般会设计为受控组件，它的状态，会收到用户交互影响而改变，从而也会导致UI层的改变。</li> <li>当需要处理多个 input 元素时，我们可以给每个元素添加 name 属性，并让处理函数根据 event.target.name 的值选择要执行的操作。</li> <li><code>this.setState({[name]: value})</code>，这里利用了ES6 计算属性名称的语法。</li> <li>在受控组件上指定 <code>value</code> 的值， 会阻止用户更改输入。如果你指定了 value，但输入仍可编辑，则可能是你意外地将value 设置为 undefined 或 null。</li> <li>处理表单的时候，推荐使用受控组件。另一种替代方案是使用非受控组件，这时表单数据将交由 DOM 节点来处理。</li></ul> <h3 id="组合、继承"><a href="#组合、继承" class="header-anchor">#</a> 组合、继承</h3> <ul><li>推荐使用组合而非继承来实现组件间的代码重用。</li> <li>通过<code>children prop</code> 来将他们的子组件传递到渲染结果中，类似 Vue 中的插槽。也可以通过<code>prop</code>来传递组件。</li> <li>React 中没有“槽”这一概念的限制，你可以将任何东西作为 props 进行传递。</li> <li>如果想要在组件间复用非 UI 的功能，我们建议将其提取为一个单独的 JavaScript 模块，如函数、对象或者类。组件可以直接引入<code>（import）</code>而无需通过 <code>extend</code> 继承它们。</li></ul> <h2 id="高级部分"><a href="#高级部分" class="header-anchor">#</a> 高级部分</h2> <h3 id="代码分割"><a href="#代码分割" class="header-anchor">#</a> 代码分割</h3> <ul><li>使用 Create React App，该功能已开箱即用。</li> <li>当使用 Babel 时，你要确保 Babel 能够解析动态 import 语法而不是将其进行转换。需要 <code>@babel/plugin-syntax-dynamic-import</code> 插件。</li> <li><code>React.lazy</code>，可以动态引入组件。然后应在 Suspense 组件中渲染 lazy 组件，如此使得我们可以使用在等待加载 lazy 组件时做优雅降级。</li> <li>如果动态加载的组件有带有样式的，需要做处理，那么打包跟 chunk 文件一起，这样的话 css 文件不会被异步加载。</li> <li>注意：<code>React.lazy</code> 目前只支持默认导出（default exports）。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span>Suspense<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">const</span> LazyComp <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./LazyComp'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">function</span> <span class="token function">MyComp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span>
		<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>Suspense fallback<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>loading<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span>LazyComp <span class="token operator">/</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span><span class="token operator">/</span>Suspense<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
	<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="context"><a href="#context" class="header-anchor">#</a> Context</h3> <ul><li><code>Context</code> 提供了一种在组件之间共享此类值的方式，而不必显式地通过组件树的逐层传递 <code>props</code>。</li> <li>TOFILL</li></ul> <h3 id="高阶组件"><a href="#高阶组件" class="header-anchor">#</a> 高阶组件</h3> <ul><li>定义：将组件作为参数，并返回新组件的函数。</li> <li>常见的组件就是：Redux 的 <code>connect</code></li> <li>解决的问题：我们需要一个抽象，允许我们在一个地方定义这个逻辑，并在许多组件之间共享它。</li></ul> <h2 id="api"><a href="#api" class="header-anchor">#</a> API</h2> <h3 id="createelement"><a href="#createelement" class="header-anchor">#</a> createElement</h3> <ul><li>跟 Vue3.0 中的 <code>h</code> 函数很像</li></ul> <h2 id="concurrent-模式"><a href="#concurrent-模式" class="header-anchor">#</a> Concurrent 模式</h2> <ul><li>目前尚处于实验阶段，可能会在 <code>React 18</code> 版本中落地。</li> <li>概念：<code>Concurrent</code> 模式是一组 <code>React</code> 的新功能，可帮助应用保持响应，并根据用户的设备性能和网速进行适当的调整。在 <code>Concurrent</code> 模式中，渲染不是阻塞的。它是可中断的。</li> <li>产生卡顿的原因很简单：一旦渲染开始，就不能被终止。<code>Concurrent</code> 模式减少了防抖和节流在 UI 中的需求。因为渲染是可以中断的，React 不需要人为地 延迟 工作以避免卡顿。</li></ul></div></section> <footer class="page-edit"><!----> <!----></footer> <!----> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-2" data-v-b57cc07c><a href="/study/react.html#设计思想" class="sidebar-link reco-side-设计思想" data-v-b57cc07c>设计思想</a></li><li class="level-2" data-v-b57cc07c><a href="/study/react.html#版本更新" class="sidebar-link reco-side-版本更新" data-v-b57cc07c>版本更新</a></li><li class="level-2" data-v-b57cc07c><a href="/study/react.html#基础" class="sidebar-link reco-side-基础" data-v-b57cc07c>基础</a></li><li class="level-3" data-v-b57cc07c><a href="/study/react.html#对比-vue" class="sidebar-link reco-side-对比-vue" data-v-b57cc07c>对比 Vue</a></li><li class="level-3" data-v-b57cc07c><a href="/study/react.html#生命周期" class="sidebar-link reco-side-生命周期" data-v-b57cc07c>生命周期</a></li><li class="level-3" data-v-b57cc07c><a href="/study/react.html#数据-state" class="sidebar-link reco-side-数据-state" data-v-b57cc07c>数据 State</a></li><li class="level-3" data-v-b57cc07c><a href="/study/react.html#组件" class="sidebar-link reco-side-组件" data-v-b57cc07c>组件</a></li><li class="level-3" data-v-b57cc07c><a href="/study/react.html#合成事件" class="sidebar-link reco-side-合成事件" data-v-b57cc07c>合成事件</a></li><li class="level-3" data-v-b57cc07c><a href="/study/react.html#表单" class="sidebar-link reco-side-表单" data-v-b57cc07c>表单</a></li><li class="level-3" data-v-b57cc07c><a href="/study/react.html#组合、继承" class="sidebar-link reco-side-组合、继承" data-v-b57cc07c>组合、继承</a></li><li class="level-2" data-v-b57cc07c><a href="/study/react.html#高级部分" class="sidebar-link reco-side-高级部分" data-v-b57cc07c>高级部分</a></li><li class="level-3" data-v-b57cc07c><a href="/study/react.html#代码分割" class="sidebar-link reco-side-代码分割" data-v-b57cc07c>代码分割</a></li><li class="level-3" data-v-b57cc07c><a href="/study/react.html#context" class="sidebar-link reco-side-context" data-v-b57cc07c>Context</a></li><li class="level-3" data-v-b57cc07c><a href="/study/react.html#高阶组件" class="sidebar-link reco-side-高阶组件" data-v-b57cc07c>高阶组件</a></li><li class="level-2" data-v-b57cc07c><a href="/study/react.html#api" class="sidebar-link reco-side-api" data-v-b57cc07c>API</a></li><li class="level-3" data-v-b57cc07c><a href="/study/react.html#createelement" class="sidebar-link reco-side-createelement" data-v-b57cc07c>createElement</a></li><li class="level-2" data-v-b57cc07c><a href="/study/react.html#concurrent-模式" class="sidebar-link reco-side-concurrent-模式" data-v-b57cc07c>Concurrent 模式</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/assets/js/app.53434269.js" defer></script><script src="/assets/js/3.c8dd2d9d.js" defer></script><script src="/assets/js/1.7861730c.js" defer></script><script src="/assets/js/86.822bd8b6.js" defer></script>
  </body>
</html>
